<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/gatsby-blog-tutorial/styles.23aec93274c2f3dd0556.css">body{margin:0;--theme-color:#2f5b83}.gatsby-remark-code-name{margin:0 0 -.5em .5em}.gatsby-remark-code-name span{background:grey;color:#fff;padding:.25em}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style><meta name="generator" content="Gatsby 2.20.36"/><style data-styled="" data-styled-version="5.1.0">.ecpyWB{background:#999;padding:1em;color:white;}/*!sc*/
data-styled.g1[id="Footer__Wrapper-qhytvz-0"]{content:"ecpyWB,"}/*!sc*/
.dmeTcP{background:var(--theme-color);margin:0px;padding:0.5em 1em;color:white;}/*!sc*/
.dmeTcP a{-webkit-text-decoration:none;text-decoration:none;color:white;}/*!sc*/
data-styled.g2[id="Header__Wrapper-sc-1isb4n6-0"]{content:"dmeTcP,"}/*!sc*/
.hNBxKb{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}/*!sc*/
.hNBxKb > div{-webkit-flex:auto;-ms-flex:auto;flex:auto;}/*!sc*/
data-styled.g3[id="Layout__Wrapper-sc-1l83v77-0"]{content:"hNBxKb,"}/*!sc*/
.cJcvIG{background:#f4f4f4;padding:2em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:space-around;-webkit-justify-content:space-around;-ms-flex-pack:space-around;justify-content:space-around;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;word-wrap:break-word;}/*!sc*/
.cJcvIG > article{width:60%;background:white;border-radius:2px;padding:1.5em;margin-bottom:1.5em;}/*!sc*/
@media screen and (max-width:768px){.cJcvIG > article{width:100%;}}/*!sc*/
.cJcvIG > article div:last-child img{max-width:100%;}/*!sc*/
.cJcvIG > article div:last-child a{color:var(--theme-color);-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.cJcvIG .frontmatter.tag{display:inline-block;background:var(--theme-color);color:white;margin:0 0.25em 0.25em 0;padding:0.25em;}/*!sc*/
.cJcvIG .frontmatter.date{margin-top:0.5em;color:#666;}/*!sc*/
.cJcvIG > section{width:30%;}/*!sc*/
@media screen and (max-width:768px){.cJcvIG > section{width:100%;}}/*!sc*/
.cJcvIG > section h3{padding:0.5em;margin:0px;border-radius:2px;box-sizing:content-box;color:white;background:var(--theme-color);}/*!sc*/
.cJcvIG > section ul{list-style:none;padding:0px;}/*!sc*/
.cJcvIG > section ul li{padding:0.75em;background:white;margin-bottom:1em;border-radius:2px;}/*!sc*/
.cJcvIG > section ul a{-webkit-text-decoration:none;text-decoration:none;color:black;}/*!sc*/
data-styled.g6[id="post__Body-hsjs07-0"]{content:"cJcvIG,"}/*!sc*/
</style><link as="script" rel="preload" href="/gatsby-blog-tutorial/webpack-runtime-8bebf53f2ab1137c833a.js"/><link as="script" rel="preload" href="/gatsby-blog-tutorial/framework-995310802c8b4a765741.js"/><link as="script" rel="preload" href="/gatsby-blog-tutorial/styles-c3197c6105318d4816ab.js"/><link as="script" rel="preload" href="/gatsby-blog-tutorial/app-8b3b949d4808e61478e4.js"/><link as="script" rel="preload" href="/gatsby-blog-tutorial/fa2fe427c434b74684fd0fa46a4e612bba9c9738-5bc62388e00a73cdabe3.js"/><link as="script" rel="preload" href="/gatsby-blog-tutorial/component---src-templates-post-js-d525f185aca2fa6f2115.js"/><link as="fetch" rel="preload" href="/gatsby-blog-tutorial/page-data/c26ea8f6-1198-5a65-8885-a33809cefcdc/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/gatsby-blog-tutorial/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Layout__Wrapper-sc-1l83v77-0 hNBxKb"><header class="Header__Wrapper-sc-1isb4n6-0 dmeTcP"><h1><a href="/gatsby-blog-tutorial/">Qiitaに書いたやつ</a></h1></header><div><div class="post__Body-hsjs07-0 cJcvIG"><article><h1>Gatsbyで1時間でブログを作るチュートリアル (Qiitaの記事を移行する)</h1><div><span class="frontmatter tag">JavaScript</span><span class="frontmatter tag">React</span><span class="frontmatter tag">gatsby</span></div><div class="frontmatter date"><b>2020年04月27日</b></div><div><p>Gatsbyを使ってブログを作ります。
基本的なお作法は<a href="https://qiita.com/abouch/items/ab7694e64f011ee2b265">こちら</a>にまとめたので良かったら参照ください。
今回はstarterは使わずにやっていきます。</p>
<p>最終的にはQiitaに書いた記事を<a href="https://churabou.github.io/gatsby-blog-tutorial/">作ったサイト</a>にのっけて公開しました。
(画像はS3を参照しているので完全な移行ではないですが)</p>
<img width="1680" alt="スクリーンショット 2020-04-26 16.25.06.png" src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/20305b41-04bd-9cca-8747-bb204fe524ef.png">
<h2>前提</h2>
<p>記事は下記のようなメタ情報を含むマークダウンで書かれている前提です。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">---
title: Gatsbyでブログを作るチュートリアル
date: 2020-04-11
tags: [&quot;Gatsby&quot;]
---

# Step1 Gatsbyをインストール&amp;Hello Gatsby!

...</code></pre></div>
<h2>Step1 Gatsbyをインストール&#x26;Hello Gatsby!</h2>
<p>プロジェクトを作成して以下の手順ですすめます。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">echo &quot;{}&quot; &gt; package.json
yarn add -D react react-dom gatsby
mkdir -p src/pages</code></pre></div>
<div class=gatsby-remark-code-name>
            <span>src/pages/index.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>h1<span class="token operator">></span>Hello Gatsby<span class="token operator">!</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">gatsby develop</code></pre></div>
<p><a href="http://localhost:8000/">http://localhost:8000/</a> にアクセスして表示されることを確認します。</p>
<p><a href="https://www.gatsbyjs.org/docs/setting-up-gatsby-without-gatsby-new/">setting-up-gatsby-without-gatsby-new</a></p>
<h2>Step2 Graphqlを使ってブログのの内容を取得する。</h2>
<p><code class="language-text">contents</code>ディレクトリに記事を作成します。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mkdir contents</code></pre></div>
<div class=gatsby-remark-code-name>
            <span>contents/hello.md</span>
          </div>
<div class="gatsby-highlight" data-language="md"><pre class="language-md"><code class="language-md"><span class="token hr punctuation">---</span>
title: Gatsbyでブログを作るチュートリアル
date: 2020-04-11
<span class="token title important">tags: ["Gatsby"]
<span class="token punctuation">---</span></span>

<span class="token title important"><span class="token punctuation">#</span> Step1 Gatsbyをインストール&amp;Hello Gatsby!</span>

...</code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn add -D gatsby-source-filesystem gatsby-transformer-remark</code></pre></div>
<div class=gatsby-remark-code-name>
            <span>gatsby-config.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      resolve<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-source-filesystem</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        name<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">src</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        path<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/contents/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-transformer-remark</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>上記のプラグインを導入して先程作成したcontentsディレクトリを読むようにプラグインの設定を追加します。</p>
<p><a href="http://localhost:8000/___graphql">http://localhost:8000/___graphql</a> にアクセスすると以下のクエリで記事の一覧が取得できると思います。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">{
  allMarkdownRemark {
    edges {
      node {
        frontmatter {
          title
          tags
          date(formatString: &quot;YYYY年MM月DD日&quot;)
        }
      }
    }
  }
}</code></pre></div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"data"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"allMarkdownRemark"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">"edges"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
          <span class="token property">"node"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
            <span class="token property">"frontmatter"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"Hello Gatsby"</span><span class="token punctuation">,</span>
              <span class="token property">"tags"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
                <span class="token string">"Gatsby"</span>
              <span class="token punctuation">]</span><span class="token punctuation">,</span>
              <span class="token property">"date"</span><span class="token operator">:</span> <span class="token string">"2020年04月11日"</span>
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>これで<code class="language-text">contents</code>に配置したmdファイルの内容を取得できます。</p>
<h2>Step3 記事一覧ページを作る</h2>
<p>先程のクエリをつかって、記事一覧を表示します。</p>
<div class=gatsby-remark-code-name>
            <span>src/pages/index.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> query <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query {
    allMarkdownRemark(sort: { order: DESC, fields: frontmatter___date }) {
      edges {
        node {
          id
          frontmatter {
            title
            tags
            date(formatString: "YYYY年MM月DD日")
          }
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> edges <span class="token operator">=</span> data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>edges
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span>全ての記事<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>ul<span class="token operator">></span>
        <span class="token punctuation">{</span>edges<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">edge</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>div<span class="token operator">></span>
                <span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
                  <span class="token operator">&lt;</span>span key<span class="token operator">=</span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
              <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
              <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h2>Step4 テンプレートを使って記事を表示する</h2>
<p>一覧ページから遷移する記事のページを作成します。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mkdir -p src/templates</code></pre></div>
<p>テンプレートを作成します。</p>
<div class=gatsby-remark-code-name>
            <span>src/templates/post.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> pageQuery <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query markdown($id: String!) {
    markdownRemark(id: { eq: $id }) {
      html
      frontmatter {
        title
        tags
        date(formatString: "YYYY年MM月DD日")
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> html <span class="token operator">=</span> data<span class="token punctuation">.</span>markdownRemark<span class="token punctuation">.</span>html
  <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> tags<span class="token punctuation">,</span> date <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>markdownRemark<span class="token punctuation">.</span>frontmatter
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>article<span class="token operator">></span>
        <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span>
          <span class="token punctuation">{</span>tags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>span key<span class="token operator">=</span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>date<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>div dangerouslySetInnerHTML<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> __html<span class="token operator">:</span> html <span class="token punctuation">}</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>article<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>作成したテンプレートと<code class="language-text">createPage</code> APIを使って動的にページを生成します。</p>
<div class=gatsby-remark-code-name>
            <span>gatsby-node.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> actions <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span> <span class="token operator">=</span> actions<span class="token punctuation">;</span>

  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">graphql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      query {
        allMarkdownRemark {
          edges {
            node {
              id
              html
            }
          }
        }
      }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>errors<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> result<span class="token punctuation">.</span>errors<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> posts <span class="token operator">=</span> result<span class="token punctuation">.</span>data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>edges<span class="token punctuation">;</span>

  posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">post</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      path<span class="token operator">:</span> post<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      component<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./src/templates/post.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      context<span class="token operator">:</span> <span class="token punctuation">{</span>
        id<span class="token operator">:</span> post<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p>これで記事一覧ページと記事ページへの遷移が完成です。</p>
<h2>Step5 見た目を整える</h2>
<p>好みのCSSフレームワークを使って見た目を調整していきます。今回はstyled-componentを使います。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn add -D gatsby-plugin-styled-components styled-components babel-plugin-styled-components</code></pre></div>
<p><a href="https://www.gatsbyjs.org/docs/styled-components/">https://www.gatsbyjs.org/docs/styled-components/</a></p>
<div class=gatsby-remark-code-name>
            <span>gatsby-config.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-plugin-styled-components</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
     <span class="token operator">...</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div>
<p>CSSは<code class="language-text">gatsby-browser.js</code>で読み込みます。</p>
<div class=gatsby-remark-code-name>
            <span>idnex.css</span>
          </div>
<div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">margin</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
  <span class="token property">--theme-color</span><span class="token punctuation">:</span> <span class="token function">hsl</span><span class="token punctuation">(</span>209<span class="token punctuation">,</span> 47%<span class="token punctuation">,</span> 35%<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div>
<div class=gatsby-remark-code-name>
            <span>gatsby-browser.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./index.css"</span><span class="token punctuation">)</span></code></pre></div>
<h3>5-1 一覧ページ</h3>
<p>コンポネントを作成しつつ、スタイルをあてていきます。</p>
<div class=gatsby-remark-code-name>
            <span>src/components/Header.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">"styled-components"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> Wrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>header<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  background: var(--theme-color);
  margin: 0px;
  padding: 0.5em 1em;
  color: white;
  a {
    text-decoration: none;
    color: white;
  }
</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>Wrapper<span class="token operator">></span>
    <span class="token operator">&lt;</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token string">"/"</span><span class="token operator">></span>Qiitaに書いたやつ<span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>Wrapper<span class="token operator">></span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class=gatsby-remark-code-name>
            <span>src/components/Footer.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">"styled-components"</span>

<span class="token keyword">const</span> Wrapper <span class="token operator">=</span> styled<span class="token punctuation">.</span>footer<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  background: #999;
  padding: 1em;
  color: white;
</span><span class="token template-punctuation string">`</span></span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token operator">&lt;</span>Wrapper<span class="token operator">></span><span class="token number">2020</span> churabou<span class="token operator">&lt;</span><span class="token operator">/</span>Wrapper<span class="token operator">></span></code></pre></div>
<div class=gatsby-remark-code-name>
            <span>src/pages/index.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> styled <span class="token keyword">from</span> <span class="token string">"styled-components"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>
<span class="token keyword">import</span> Header <span class="token keyword">from</span> <span class="token string">"../components/Header"</span>
<span class="token keyword">import</span> Footer <span class="token keyword">from</span> <span class="token string">"../components/Footer"</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> query <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query {
    allMarkdownRemark(sort: { order: DESC, fields: frontmatter___date }) {
      edges {
        node {
          id
          frontmatter {
            title
            tags
            date(formatString: "YYYY年MM月DD日")
          }
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">const</span> Body <span class="token operator">=</span> styled<span class="token punctuation">.</span>div<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  padding: 2em;
  ul {
    list-style: none;
    padding: 0px;
  }
  li {
    padding: 1em;
    margin-bottom: 1em;
    box-shadow: 0px 0px 4px rgba(0, 0, 0, 0.3);
    div {
      padding: 0.25em;
    }
    span {
      display: inline-block;
      padding: 0.25em;
      background: var(--theme-color);
      color: white;
      margin: 0 0.25em 0.25em 0;
    }
    a {
      text-decoration: none;
      color: black;
    }
  }
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> edges <span class="token operator">=</span> data<span class="token punctuation">.</span>allMarkdownRemark<span class="token punctuation">.</span>edges
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">></span>
      <span class="token operator">&lt;</span>Header <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>Body<span class="token operator">></span>
        <span class="token operator">&lt;</span>h1<span class="token operator">></span>全ての記事<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&lt;</span>ul<span class="token operator">></span>
          <span class="token punctuation">{</span>edges<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">edge</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
            <span class="token operator">&lt;</span>li key<span class="token operator">=</span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>Link to<span class="token operator">=</span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>id<span class="token punctuation">}</span><span class="token operator">></span>
                <span class="token operator">&lt;</span>div<span class="token operator">></span>
                  <span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>tags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
                    <span class="token operator">&lt;</span>span key<span class="token operator">=</span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>tag<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">></span>
                  <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
                <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
                <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
                <span class="token operator">&lt;</span>div<span class="token operator">></span><span class="token punctuation">{</span>edge<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
              <span class="token operator">&lt;</span><span class="token operator">/</span>Link<span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">></span>
          <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Body<span class="token operator">></span>
      <span class="token operator">&lt;</span>Footer <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>React<span class="token punctuation">.</span>Fragment<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<h3>5-2 記事一覧ページ</h3>
<p>以下のプラグインを追加してsyntax hilightをします。
GatsbyのPluginのgatsby-transformer-remarkのプラグインです。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn add -D gatsby-remark-prismjs prismjs</code></pre></div>
<div class=gatsby-remark-code-name>
            <span>gatsby-config.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      resolve<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-transformer-remark</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      options<span class="token operator">:</span> <span class="token punctuation">{</span>
        plugins<span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            resolve<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-remark-prismjs</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div>
<p>使いたいテーマのCSSを読み込みます。</p>
<div class=gatsby-remark-code-name>
            <span>gatsby-browser.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"prismjs/themes/prism-okaidia.css"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><a href="https://littlebylittle.work/2020/01/gatsby-syntax-highlighting/">https://littlebylittle.work/2020/01/gatsby-syntax-highlighting/</a></p>
<p>少しスタイル当てると一気にブログっぽくなりますね。</p>
<p><a href="https://github.com/churabou/gatsby-blog-tutorial/commits/master">https://github.com/churabou/gatsby-blog-tutorial/commits/master</a></p>
<h2>Step6 公開する</h2>
<h3>GitHub Pages</h3>
<p>GitHub Pagesで公開します。<del>Gatsby関連は基本的にドキュメントを見るのが早いです。</del></p>
<p><a href="https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/">https://www.gatsbyjs.org/docs/how-gatsby-works-with-github-pages/</a></p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn add -D gh-pages</code></pre></div>
<div class=gatsby-remark-code-name>
            <span>gatsby-config.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  pathPrefix<span class="token operator">:</span> <span class="token string">"/repository_name"</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span></code></pre></div>
<div class=gatsby-remark-code-name>
            <span>package.json</span>
          </div>
<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">"deploy"</span><span class="token operator">:</span> <span class="token string">"gatsby build --prefix-paths &amp;&amp; gh-pages -d public"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">yarn run deploy</code></pre></div>
<p><del>リポジトリの設定でgh-pagesブランチを選んで公開完了です。</del></p>
<h3>Netlifyで公開する</h3>
<p>こちらが参考になりました</p>
<p><a href="https://qiita.com/k-penguin-sato/items/7554e5e7e90aa10ae225">https://qiita.com/k-penguin-sato/items/7554e5e7e90aa10ae225</a></p>
<hr>
<h2>その他</h2>
<h4>Qiitaの記事ダウンロードする</h4>
<div class=gatsby-remark-code-name>
            <span>download.js</span>
          </div>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token string">"Qiitaのユーザー名"</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> https <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"https"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"fs"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">URL</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://qiita.com/api/v2/users/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/items</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">fetchItems</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span>
  <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    https
      <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token constant">URL</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> rawData <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">setEncoding</span><span class="token punctuation">(</span><span class="token string">"utf8"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"data"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">chunk</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>rawData <span class="token operator">+=</span> chunk<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        res<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"end"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>rawData<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">"error"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">main</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> items <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetchItems</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  items<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> title<span class="token punctuation">,</span> tags<span class="token punctuation">,</span> body<span class="token punctuation">,</span> created_at <span class="token punctuation">}</span> <span class="token operator">=</span> item<span class="token punctuation">;</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> <span class="token punctuation">[</span>
      <span class="token string">"---"</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">title: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">date: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>created_at<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">"T"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">tags: [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tags<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">tag</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">"</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tag<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token string">"---"</span><span class="token punctuation">,</span>
      <span class="token string">""</span><span class="token punctuation">,</span>
      body<span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"\n"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    fs<span class="token punctuation">.</span><span class="token function">writeFile</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">./contents/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>created_at<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.md</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      content<span class="token punctuation">,</span>
      <span class="token string">"utf8"</span><span class="token punctuation">,</span>
      <span class="token punctuation">(</span><span class="token parameter">date<span class="token punctuation">,</span> err</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">node download.js</code></pre></div>
<p>上記のスクリプトを実行して投稿した記事のmarkdownを落としつつ、メタ情報を追加します。</p>
<h4>関連タグを表示する</h4>
<p>以下のクエリで同じタグかつ自分以外の記事を日付順に5件まで取得しました。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">    sameTagPosts: allMarkdownRemark(
      limit: 5
      sort: { order: DESC, fields: frontmatter___date }
      filter: { frontmatter: { tags: { in: $tags } }, id: { ne: $id } }
    ) </code></pre></div>
<p><a href="https://github.com/churabou/gatsby-blog-tutorial/commit/660e6089f44b5d2d1857b7914b4d545c360353d5">https://github.com/churabou/gatsby-blog-tutorial/commit/660e6089f44b5d2d1857b7914b4d545c360353d5</a></p>
<h4>コードタイトルを表示する</h4>
<p><code class="language-text">gatsby-remark-code-titles</code>というpluginが人気らしいのです。</p>
<p><a href="https://littlebylittle.work/2020/01/gatsby-syntax-highlighting/">https://littlebylittle.work/2020/01/gatsby-syntax-highlighting/</a></p>
<p><a href="https://qiita.com/muuuuminn/items/ec9b620f057da3e66351#%E3%82%B3%E3%83%BC%E3%83%89%E3%83%96%E3%83%AD%E3%83%83%E3%82%AF%E3%81%AB%E3%82%BF%E3%82%A4%E3%83%88%E3%83%AB%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B">#コードブロックにタイトルをつける</a></p>
<p>ただ自分には<code class="language-text">js:title=filename</code>見たいな書き方に抵抗があるので、qiitaのようにそのままファイル名を書いて使えるようにローカルにpluginを作ります。</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">mkdir -p plugins/gatsby-remark-code-title</code></pre></div>
<p>package.jsonを作成して<code class="language-text">gatsby-config.js</code>で<code class="language-text">gatsby-markdown-remark</code>のpluginに指定します。</p>
<p><a href="https://github.com/churabou/gatsby-blog-tutorial/commit/6b3a888702946533764f92e1c64ad46184271c67">https://github.com/churabou/gatsby-blog-tutorial/commit/6b3a888702946533764f92e1c64ad46184271c67</a></p>
<h4>SEO対策をする</h4>
<p>ライブラリやプラグインを使うのが良さそうですね。</p>
<p><a href="https://www.gatsbyjs.org/docs/add-seo-component/">https://www.gatsbyjs.org/docs/add-seo-component/</a></p>
<h4>ぺージング、検索機能、などなど・・・</h4>
<p>時間があればやってきたいですね</p></div></article><section><h3>同じタグの投稿</h3><ul><li><a href="/gatsby-blog-tutorial/34226e4f-0a84-533b-b543-be011c238051"><h4>RxJSのswitchMap mergeMap concatMap</h4><div><span class="frontmatter tag">JavaScript</span><span class="frontmatter tag">RxJS</span><span class="frontmatter tag">Rx</span></div><div class="frontmatter date"><b>2020年04月12日</b></div></a></li><li><a href="/gatsby-blog-tutorial/01361ba1-5b01-5e53-b04b-9bc1fdb2805f"><h4>JavaScriptのthisは難しくない</h4><div><span class="frontmatter tag">JavaScript</span><span class="frontmatter tag">TypeScript</span><span class="frontmatter tag">Vue.js</span><span class="frontmatter tag">React</span></div><div class="frontmatter date"><b>2020年04月12日</b></div></a></li><li><a href="/gatsby-blog-tutorial/5fa0c2c8-65d8-51a2-a79c-447589ed9dba"><h4>JavaScriptでカジュアルに日付操作する</h4><div><span class="frontmatter tag">JavaScript</span><span class="frontmatter tag">TypeScript</span></div><div class="frontmatter date"><b>2020年03月21日</b></div></a></li><li><a href="/gatsby-blog-tutorial/0bf1e7c5-5ba4-5835-b370-47df6c8e0933"><h4>Gatsbyを最速で理解するためのチュートリアル</h4><div><span class="frontmatter tag">JavaScript</span><span class="frontmatter tag">静的サイトジェネレーター</span><span class="frontmatter tag">React</span><span class="frontmatter tag">gatsby</span></div><div class="frontmatter date"><b>2019年12月14日</b></div></a></li><li><a href="/gatsby-blog-tutorial/fa032aee-2b4e-50bf-ad2b-200d44d39000"><h4>create-react-appを使わずにReactの環境構築をして周辺ツールとかを理解する</h4><div><span class="frontmatter tag">JavaScript</span><span class="frontmatter tag">TypeScript</span><span class="frontmatter tag">Vue.js</span><span class="frontmatter tag">React</span></div><div class="frontmatter date"><b>2019年12月09日</b></div></a></li></ul></section></div></div><footer class="Footer__Wrapper-qhytvz-0 ecpyWB">2020 churabou</footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/c26ea8f6-1198-5a65-8885-a33809cefcdc";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-8b3b949d4808e61478e4.js"],"component---src-templates-list-js":["/component---src-templates-list-js-52ab88b29333f1950ffe.js"],"component---src-templates-post-js":["/component---src-templates-post-js-d525f185aca2fa6f2115.js"]};/*]]>*/</script><script src="/gatsby-blog-tutorial/component---src-templates-post-js-d525f185aca2fa6f2115.js" async=""></script><script src="/gatsby-blog-tutorial/fa2fe427c434b74684fd0fa46a4e612bba9c9738-5bc62388e00a73cdabe3.js" async=""></script><script src="/gatsby-blog-tutorial/app-8b3b949d4808e61478e4.js" async=""></script><script src="/gatsby-blog-tutorial/styles-c3197c6105318d4816ab.js" async=""></script><script src="/gatsby-blog-tutorial/framework-995310802c8b4a765741.js" async=""></script><script src="/gatsby-blog-tutorial/webpack-runtime-8bebf53f2ab1137c833a.js" async=""></script></body></html>