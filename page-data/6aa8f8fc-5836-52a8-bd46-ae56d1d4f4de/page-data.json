{"componentChunkName":"component---src-templates-post-js","path":"/6aa8f8fc-5836-52a8-bd46-ae56d1d4f4de","result":{"data":{"markdownRemark":{"html":"<p>UIViewに新着と書かれたツールチップを描画します。ライブラリなんか使わずに簡単に描画できます。</p>\n<img width=\"80\" alt=\"スクリーンショット 2019-08-30 22.21.19.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/df0c0118-7d4c-4f51-7167-97f0c784da9b.png\">\n<p>まずPaddingラベルです。UILabelでは残念ながらPaddingを指定できないのでサブクラスを作成します。</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">PaddingLabel</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UILabel</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">var</span> padding<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIEdgeInsets</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>zero\n    \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">drawText</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">drawText</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span><span class=\"token function\">inset</span><span class=\"token punctuation\">(</span>by<span class=\"token punctuation\">:</span> padding<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">var</span> intrinsicContentSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGSize</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> size <span class=\"token operator\">=</span> <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span>intrinsicContentSize\n        size<span class=\"token punctuation\">.</span>width <span class=\"token operator\">+</span><span class=\"token operator\">=</span> padding<span class=\"token punctuation\">.</span><span class=\"token keyword\">left</span> <span class=\"token operator\">+</span> padding<span class=\"token punctuation\">.</span><span class=\"token keyword\">right</span>\n        size<span class=\"token punctuation\">.</span>height <span class=\"token operator\">+</span><span class=\"token operator\">=</span> padding<span class=\"token punctuation\">.</span>top <span class=\"token operator\">+</span> padding<span class=\"token punctuation\">.</span>bottom\n        <span class=\"token keyword\">return</span> size\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ツールチップの形はUIViewのdraw(_ rect: CGRect)メソッドをOverrideしてコンテクスト描画します。\nといっても別に難しいことはなく、鉛筆でツールチップを描くようにPathで線を引くだけです。\nツールチップの大きさはUILabelのintrinsicContentSizeによって決められるのでtextを指定してあげればいい感じに表示されます。今回は矢印の位置を下に固定しています。</p>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TooltipView</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> arrowWidth<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">7</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> arrowHeight<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">4.5</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> radius<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">4</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> fillColor<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>hex<span class=\"token punctuation\">:</span> <span class=\"token string\">\"01b7ff\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> lineWidth<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token number\">2</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> strokeColor<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>white\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> titleLabel<span class=\"token punctuation\">:</span> <span class=\"token builtin\">PaddingLabel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> it <span class=\"token operator\">=</span> <span class=\"token function\">PaddingLabel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        it<span class=\"token punctuation\">.</span>textColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>white\n        it<span class=\"token punctuation\">.</span>font <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span><span class=\"token function\">systemFont</span><span class=\"token punctuation\">(</span>ofSize<span class=\"token punctuation\">:</span> <span class=\"token number\">17</span><span class=\"token punctuation\">)</span>\n        it<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> <span class=\"token string\">\"新着\"</span>\n        it<span class=\"token punctuation\">.</span>textAlignment <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>center\n        it<span class=\"token punctuation\">.</span>padding <span class=\"token operator\">=</span> <span class=\"token function\">UIEdgeInsets</span><span class=\"token punctuation\">(</span>top<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">:</span> <span class=\"token number\">4</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">return</span> it\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder aDecoder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">:</span> aDecoder<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> rect<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> top<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> rect<span class=\"token punctuation\">.</span>minY <span class=\"token operator\">+</span> arrowHeight\n        <span class=\"token keyword\">let</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> rect<span class=\"token punctuation\">.</span>minX <span class=\"token operator\">+</span> arrowWidth\n        <span class=\"token keyword\">let</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> rect<span class=\"token punctuation\">.</span>maxX <span class=\"token operator\">-</span> arrowWidth\n        <span class=\"token keyword\">let</span> bottom<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> rect<span class=\"token punctuation\">.</span>maxY <span class=\"token operator\">-</span> arrowHeight <span class=\"token operator\">-</span> lineWidth\n\n        <span class=\"token keyword\">let</span> topLeft <span class=\"token operator\">=</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">left</span> <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> top <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> topRight <span class=\"token operator\">=</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">right</span> <span class=\"token operator\">-</span> radius<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> top <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> bottomLeft <span class=\"token operator\">=</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">left</span> <span class=\"token operator\">+</span> radius<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> bottom <span class=\"token operator\">-</span> radius<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> bottomRight <span class=\"token operator\">=</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">right</span> <span class=\"token operator\">-</span> radius<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> bottom <span class=\"token operator\">-</span> radius<span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">let</span> path <span class=\"token operator\">=</span> <span class=\"token function\">UIBezierPath</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n\n        <span class=\"token comment\">//     _____________________</span>\n        <span class=\"token comment\">//   /</span>\n        <span class=\"token comment\">//  |</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addArc</span><span class=\"token punctuation\">(</span>\n            withCenter<span class=\"token punctuation\">:</span> topLeft<span class=\"token punctuation\">,</span>\n            radius<span class=\"token punctuation\">:</span> radius<span class=\"token punctuation\">,</span>\n            startAngle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>pi<span class=\"token punctuation\">,</span>\n            endAngle<span class=\"token punctuation\">:</span> <span class=\"token number\">3</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">.</span>pi <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            clockwise<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> topRight<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> top<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">//                    __</span>\n        <span class=\"token comment\">//                       \\</span>\n        <span class=\"token comment\">//                        |</span>\n        <span class=\"token comment\">//                        |</span>\n\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addArc</span><span class=\"token punctuation\">(</span>\n            withCenter<span class=\"token punctuation\">:</span> topRight<span class=\"token punctuation\">,</span>\n            radius<span class=\"token punctuation\">:</span> radius<span class=\"token punctuation\">,</span>\n            startAngle<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token punctuation\">.</span>pi <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            endAngle<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n            clockwise<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">right</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> bottomRight<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">//                        |</span>\n        <span class=\"token comment\">//                        |</span>\n        <span class=\"token comment\">//                        /</span>\n        <span class=\"token comment\">//                     --</span>\n\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addArc</span><span class=\"token punctuation\">(</span>\n            withCenter<span class=\"token punctuation\">:</span> bottomRight<span class=\"token punctuation\">,</span>\n            radius<span class=\"token punctuation\">:</span> radius<span class=\"token punctuation\">,</span>\n            startAngle<span class=\"token punctuation\">:</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n            endAngle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>pi <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            clockwise<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">)</span>\n\n        <span class=\"token comment\">//  ----------  ---------</span>\n        <span class=\"token comment\">//            \\/</span>\n\n        <span class=\"token keyword\">let</span> centerX <span class=\"token operator\">=</span> rect<span class=\"token punctuation\">.</span>midX\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">+</span> arrowWidth <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> bottom<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> arrowWidth <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> rect<span class=\"token punctuation\">.</span>maxY<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> centerX <span class=\"token operator\">-</span> arrowWidth <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token operator\">+</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> bottom<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> bottomLeft<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> bottom<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n\n        <span class=\"token comment\">//  |</span>\n        <span class=\"token comment\">//  |</span>\n        <span class=\"token comment\">//  |</span>\n        <span class=\"token comment\">//   \\ _______</span>\n\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addArc</span><span class=\"token punctuation\">(</span>\n            withCenter<span class=\"token punctuation\">:</span> bottomLeft<span class=\"token punctuation\">,</span>\n            radius<span class=\"token punctuation\">:</span> radius<span class=\"token punctuation\">,</span>\n            startAngle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>pi <span class=\"token operator\">/</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span>\n            endAngle<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>pi<span class=\"token punctuation\">,</span>\n            clockwise<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span>\n        <span class=\"token punctuation\">)</span>\n\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">addLine</span><span class=\"token punctuation\">(</span>to<span class=\"token punctuation\">:</span> <span class=\"token function\">CGPoint</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">:</span> <span class=\"token keyword\">left</span><span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">:</span> topLeft<span class=\"token punctuation\">.</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n\n        fillColor<span class=\"token punctuation\">.</span><span class=\"token function\">setFill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        strokeColor<span class=\"token punctuation\">.</span><span class=\"token function\">setStroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span>lineWidth <span class=\"token operator\">=</span> lineWidth\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">fill</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        path<span class=\"token punctuation\">.</span><span class=\"token function\">stroke</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token keyword\">extension</span> <span class=\"token builtin\">TooltipView</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">addSubview</span><span class=\"token punctuation\">(</span>titleLabel<span class=\"token punctuation\">)</span>\n        titleLabel<span class=\"token punctuation\">.</span>translatesAutoresizingMaskIntoConstraints <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token builtin\">NSLayoutConstraint</span><span class=\"token punctuation\">.</span><span class=\"token function\">activate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n            titleLabel<span class=\"token punctuation\">.</span>leftAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> leftAnchor<span class=\"token punctuation\">,</span> constant<span class=\"token punctuation\">:</span> arrowWidth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            titleLabel<span class=\"token punctuation\">.</span>rightAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> rightAnchor<span class=\"token punctuation\">,</span> constant<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span>arrowWidth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            titleLabel<span class=\"token punctuation\">.</span>topAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> topAnchor<span class=\"token punctuation\">,</span> constant<span class=\"token punctuation\">:</span> arrowHeight<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            titleLabel<span class=\"token punctuation\">.</span>bottomAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> bottomAnchor<span class=\"token punctuation\">,</span> constant<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span>arrowHeight <span class=\"token operator\">-</span> lineWidth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>多少のカスタマイズ性を持たせたをgistに公開しました。\n昔はこれどうやって実装するのかわからず悲しかったです。\n(追記) UIBezierPath(roundedRect: cornerRadius: )を使えば周りは1行でかけそう。</p>\n<p>若干カスタマイズできるようにしたやつのソースをGistに乗っけました。\n<a href=\"https://gist.github.com/churabou/8057aedcf91333bce49aa43a656244ce\">https://gist.github.com/churabou/8057aedcf91333bce49aa43a656244ce</a></p>\n<img width=\"141\" alt=\"スクリーンショット 2019-08-31 14.48.22.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/fc4717d7-de8c-4854-47c0-ec91eff98f23.png\">\n<img width=\"141\" alt=\"スクリーンショット 2019-08-31 14.49.12.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/29da3b6f-e779-b3d6-b905-f536ae1c32cc.png\">\n<img width=\"142\" alt=\"スクリーンショット 2019-08-31 14.50.13.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/fe18d05f-e076-833b-11c4-25b3766039b6.png\">\n<img width=\"141\" alt=\"スクリーンショット 2019-08-31 14.50.38.png\" src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/d2b768c0-7ee6-3b32-7aaf-249a4f36bf61.png\">","frontmatter":{"title":"SwiftでTooltipを描画する","tags":["iOS","UIKit","Swift"],"date":"2019年08月31日"}},"sameTagPosts":{"edges":[{"node":{"id":"8845f661-5548-599d-8a4e-6a5320066ede","frontmatter":{"title":"SwiftUIでTextViewを使う","tags":["iOS","Swift","SwiftUI"],"date":"2019年10月27日"}}},{"node":{"id":"c57e83f6-2e10-5f63-abfb-b78c3814e7c3","frontmatter":{"title":"SwiftUIとXcodeのPreviewでオートレイアウトをリアルタイムで確認しながら実装できて感動した","tags":["Xcode","iOS","AutoLayout","Swift","SwiftUI"],"date":"2019年10月16日"}}},{"node":{"id":"36c8d4f0-7394-5bff-b6b5-bae80a8113aa","frontmatter":{"title":"Swift5.1 dynamicMemberLookup^KeyPathを使ってSwiftにKotolinのapplyを実装する","tags":["Xcode","iOS","Kotlin","Swift"],"date":"2019年10月04日"}}},{"node":{"id":"fa82a31d-4690-5cb8-a507-42237d6afec2","frontmatter":{"title":"実機１台で別端末のレイアウトを確認する方法","tags":["Xcode","iOS","Swift"],"date":"2019年08月15日"}}},{"node":{"id":"4ac87f61-abdb-5629-97f6-79d92e985fce","frontmatter":{"title":"Swiftで簡単なGrid Layoutを実装するためのレイアウトクラス （UIKit）","tags":["iOS","Swift"],"date":"2019年07月06日"}}}]}},"pageContext":{"id":"6aa8f8fc-5836-52a8-bd46-ae56d1d4f4de","tags":["iOS","UIKit","Swift"]}}}