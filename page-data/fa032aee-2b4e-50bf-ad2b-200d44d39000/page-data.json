{"componentChunkName":"component---src-templates-post-js","path":"/fa032aee-2b4e-50bf-ad2b-200d44d39000","result":{"data":{"markdownRemark":{"html":"<p>Reactに入門したのはいいもののcreate-react-appでプロジェクトを作成すると無駄なファイルが多かったり、環境構築を丸投げしてるのでちょっと色々まずいなと思い、\ncreate-react-appを使わずに環境構築をしていこうと思います。<a href=\"https://github.com/facebook/create-react-app#popular-alternatives\">ドキュメント</a>を見ると学習用やちょっと試したいときに最適である的なことが書いてありますね。</p>\n<hr>\n<p>以下はこの記事での手順をまとめたスクリプトです。npmが入っている前提ですが、実行ディレクトリにプロジェクトが生成されると思います。</p>\n<details><summary> 最終的なスクリプト </summary><div>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">PROJECT_NAME=myapp\necho $PROJECT_NAME\nmkdir $PROJECT_NAME\ncd $PROJECT_NAME\n\ncat &lt;&lt;EOF &gt; package.json\n{\n &quot;scripts&quot;: {\n    &quot;dev&quot;: &quot;webpack-dev-server --open&quot;\n  }\n}\nEOF\n\nnpm i react react-dom webpack webpack-cli\nnpm i -D typescript ts-loader webpack-dev-server @types/{react,react-dom}\n\n\nmkdir dist\nmkdir src\n\ncat &lt;&lt;EOF &gt; dist/index.html\n&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;&gt;\n&lt;head&gt;\n  &lt;meta charset=&quot;UTF-8&quot;&gt;\n  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;\n  &lt;title&gt; my-app &lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;\n  &lt;script src=&quot;bundle.js&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\nEOF\n\ncat &lt;&lt;EOF &gt; src/index.tsx\nimport React from &#39;react&#39;;\nimport ReactDOM from &#39;react-dom&#39;;\n\nconst App = () =&gt; &lt;div&gt; hello word &lt;/div&gt;\n\nReactDOM.render(&lt;App/&gt;, document.getElementById(&quot;root&quot;))\nEOF\n\ncat &lt;&lt;EOF &gt; tsconfig.json\n{\n  &quot;compilerOptions&quot;: {\n    &quot;outDir&quot;: &quot;./dist/&quot;,\n    &quot;noImplicitAny&quot;: true,\n    &quot;module&quot;: &quot;es6&quot;,\n    &quot;target&quot;: &quot;es5&quot;,\n    &quot;jsx&quot;: &quot;react&quot;,\n    &quot;allowJs&quot;: true,\n    &quot;allowSyntheticDefaultImports&quot; :true\n  }\n}\nEOF\n\ncat &lt;&lt;EOF &gt; webpack.config.js\nconst path = require(&#39;path&#39;);\n\nmodule.exports = {\n  mode: &quot;development&quot;,\n  entry: &#39;./src/index.tsx&#39;,\n  module: {\n    rules: [\n      {\n        test: /\\.tsx?$/,\n        use: &#39;ts-loader&#39;,\n        exclude: /node_modules/,\n      },\n    ],\n  },\n  resolve: {\n    extensions: [ &#39;.tsx&#39;, &#39;.ts&#39;, &#39;.js&#39; ],\n  },\n  devtool: &#39;inline-source-map&#39;,\n  devServer: {\n    contentBase: &#39;./dist&#39;,\n  },\n  output: {\n    filename: &#39;bundle.js&#39;,\n    path: path.resolve(__dirname, &#39;dist&#39;),\n  }\n};\nEOF</code></pre></div>\n</div>\n</details>\n<p>実行後は以下のようになると思います。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">├── dist\n│   └── index.html\n├── package-lock.json\n├── package.json\n├── src\n│   └── index.tsx\n├── tsconfig.json\n└── webpack.config.js</code></pre></div>\n<h2>必要なモジュール</h2>\n<ul>\n<li>React/ReactDOM</li>\n<li>webpack</li>\n<li>ソースコードを1つのファイルにまとめるツール。v4 から cli も必須になった。</li>\n<li>webpack-dev-server </li>\n<li>Hotリロード機能。</li>\n<li>トランスパイラ</li>\n<li>babel, ts-loaderとか</li>\n<li>classとかJSXとかトランスパイルしてJavaScriptコードを生成する。</li>\n</ul>\n<p> npmでいれる。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i react react-dom webpack webpack-cli</code></pre></div>\n<p> typescriptを使う場合は型定義とかも</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i -D typescript ts-loader webpack-dev-server @types/{react,react-dom}</code></pre></div>\n<h2>作成するファイル</h2>\n<ul>\n<li>index.html</li>\n<li>index.js</li>\n<li>package.json</li>\n<li>ts-config.json</li>\n<li>webpack.config.js</li>\n</ul>\n<h3>index.html</h3>\n<p><code class=\"language-text\">index.html</code></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token doctype\">&lt;!DOCTYPE html></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>html</span> <span class=\"token attr-name\">lang</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>en<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>head</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">charset</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>UTF-8<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>meta</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>viewport<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>width=device-width, initial-scale=1.0<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span>my-app<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>head</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>body</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>root<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>bundle.js<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token script\"></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>body</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>html</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>htmlファイル。webpackでbundleしたファイルを読み込む。</p>\n<h3>index.ts</h3>\n<p><code class=\"language-text\">src/index.tsx</code></p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dom\"</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">App</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span> hello word <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n\nReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">,</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>エントリーファイル。Hello Worldだけ。</p>\n<h3>tsconfig.json</h3>\n<p><code class=\"language-text\">tsconfig.json</code></p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"compilerOptions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"outDir\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"./dist/\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"noImplicitAny\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"module\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es6\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"target\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"es5\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"jsx\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"allowJs\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"allowSyntheticDefaultImports\"</span><span class=\"token operator\">:</span> <span class=\"token boolean\">true</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>とりあえず公式のと同じです。適宜追加していきます。</p>\n<h3>webpack.config.js</h3>\n<p>webpackの設定ファイルです。初見ででかいconfigファイルを見るとビビってしまいますが、最低限必要なのはそこまで多くないです。</p>\n<p><a href=\"https://webpack.js.org/guides/typescript/\">https://webpack.js.org/guides/typescript/</a>\n<a href=\"https://webpack.js.org/concepts/\">https://webpack.js.org/concepts/</a></p>\n<p><code class=\"language-text\">webpack.config.js</code></p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> path <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"path\"</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  mode<span class=\"token operator\">:</span> <span class=\"token string\">\"development\"</span><span class=\"token punctuation\">,</span>\n  entry<span class=\"token operator\">:</span> <span class=\"token string\">\"./src/index.tsx\"</span><span class=\"token punctuation\">,</span>\n  module<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    rules<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token punctuation\">{</span>\n        test<span class=\"token operator\">:</span> <span class=\"token regex\">/\\.tsx?$/</span><span class=\"token punctuation\">,</span>\n        use<span class=\"token operator\">:</span> <span class=\"token string\">\"ts-loader\"</span><span class=\"token punctuation\">,</span>\n        exclude<span class=\"token operator\">:</span> <span class=\"token regex\">/node_modules/</span><span class=\"token punctuation\">,</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  resolve<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    extensions<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\".tsx\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".ts\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\".js\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  devtool<span class=\"token operator\">:</span> <span class=\"token string\">\"inline-source-map\"</span><span class=\"token punctuation\">,</span>\n  devServer<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    contentBase<span class=\"token operator\">:</span> <span class=\"token string\">\"./dist\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  output<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    filename<span class=\"token operator\">:</span> <span class=\"token string\">\"bundle.js\"</span><span class=\"token punctuation\">,</span>\n    path<span class=\"token operator\">:</span> path<span class=\"token punctuation\">.</span><span class=\"token function\">resolve</span><span class=\"token punctuation\">(</span>__dirname<span class=\"token punctuation\">,</span> <span class=\"token string\">\"dist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>mode(dev or prod)と入出力パスとloaderとresolveなんで簡単ですね。</p>\n<p>この部分はwebpack-dev-serverの設定です。</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  devtool: &quot;inline-source-map&quot;,\n  devServer: {\n    contentBase: &quot;./dist&quot;,\n  },</code></pre></div>\n<p><a href=\"https://webpack.js.org/guides/development/#using-webpack-dev-server\">https://webpack.js.org/guides/development/#using-webpack-dev-server</a></p>\n<h3>package.json</h3>\n<p><code class=\"language-text\">npm init -y</code>みたいにすると雛形が生成されますが、最低限ファイルがあればいいようです。</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">echo <span class=\"token string\">\"{}\"</span> > package.json</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i react, react-dom</code></pre></div>\n<p>あとオプションが微妙ですね。</p>\n<p><code class=\"language-text\">--save-dev | -D</code>でdevDependencyに追加\n<code class=\"language-text\">--save | -S</code>で両方とかですかね？？</p>\n<p>npxはローカルにインストールしたパッケージを実行できる（正確ではないかも）</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npx webpack-dev-server --open</code></pre></div>\n<p><code class=\"language-text\">npm script</code>に追記して</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"webpack-dev-server --open\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm run start</code></pre></div>\n<p>で実行できるようになる。</p>\n<hr>\n<p>あとは適当にテストとかlinterとかいれるだけ。</p>\n<p>...用語とか言葉とかあやふやなところ適宜修正します。</p>\n<h2>その他</h2>\n<h4>git</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">echo &quot;node_modules&quot; &gt; .gitignore\ngit init\ngit add .\ngit commit -m &quot;create project&quot;</code></pre></div>\n<h4>styled-components</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">npm i styled-components\nnpm i @types/styled-components</code></pre></div>","frontmatter":{"title":"create-react-appを使わずにReactの環境構築をして周辺ツールとかを理解する","tags":["JavaScript","TypeScript","Vue.js","React"],"date":"2019年12月09日"}},"sameTagPosts":{"edges":[{"node":{"id":"34226e4f-0a84-533b-b543-be011c238051","frontmatter":{"title":"RxJSのswitchMap mergeMap concatMap","tags":["JavaScript","RxJS","Rx"],"date":"2020年04月12日"}}},{"node":{"id":"01361ba1-5b01-5e53-b04b-9bc1fdb2805f","frontmatter":{"title":"JavaScriptのthisは難しくない","tags":["JavaScript","TypeScript","Vue.js","React"],"date":"2020年04月12日"}}},{"node":{"id":"5fa0c2c8-65d8-51a2-a79c-447589ed9dba","frontmatter":{"title":"JavaScriptでカジュアルに日付操作する","tags":["JavaScript","TypeScript"],"date":"2020年03月21日"}}},{"node":{"id":"0bf1e7c5-5ba4-5835-b370-47df6c8e0933","frontmatter":{"title":"Gatsbyを最速で理解するためのチュートリアル","tags":["JavaScript","静的サイトジェネレーター","React","gatsby"],"date":"2019年12月14日"}}},{"node":{"id":"1920cdb0-deb2-5551-a7c5-a2db43291e10","frontmatter":{"title":"Web Animations API を使ってJavaScriptでAnimationを実装する","tags":["JavaScript","CSS3","TypeScript","Vue.js","React"],"date":"2019年09月11日"}}}]}},"pageContext":{"id":"fa032aee-2b4e-50bf-ad2b-200d44d39000","tags":["JavaScript","TypeScript","Vue.js","React"]}}}