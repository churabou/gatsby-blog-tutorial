{"componentChunkName":"component---src-templates-post-js","path":"/9dddcf53-9179-5f44-a114-dbb75552a817","result":{"data":{"markdownRemark":{"html":"<p>今更カレンダーなんて作りたくなかったけど、ライブラリ使いたくないし意外とコードが落ちてなくて\n<a href=\"https://qiita.com/sakuran/items/3c2c9f22cbcbf4aff731\">こちら</a>の記事を参考にしたが結構めちゃくちゃだったので。\n自分のように最小限コピペで動かせるものが欲しい人もいると思うので共有します。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/436be5eb-90a3-e5f1-ee0a-ffc2269555d9.gif\" alt=\"file.gif\"></p>\n<p><a href=\"https://github.com/churabou/SwiftCalendar\">https://github.com/churabou/SwiftCalendar</a></p>\n<h3>Extension</h3>\n<p>日付と色のextensionです。</p>\n<div class=gatsby-remark-code-name>\n            <span>Ex.swift</span>\n          </div>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">extension</span> <span class=\"token builtin\">UIColor</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">var</span> lightBlue<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIColor</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">UIColor</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">:</span> <span class=\"token number\">92.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> green<span class=\"token punctuation\">:</span> <span class=\"token number\">192.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> blue<span class=\"token punctuation\">:</span> <span class=\"token number\">210.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> alpha<span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">var</span> lightRed<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIColor</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">UIColor</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">:</span> <span class=\"token number\">195.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> green<span class=\"token punctuation\">:</span> <span class=\"token number\">123.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> blue<span class=\"token punctuation\">:</span> <span class=\"token number\">175.0</span> <span class=\"token operator\">/</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> alpha<span class=\"token punctuation\">:</span> <span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">Date</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">func</span> <span class=\"token function\">string</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">String</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> formatter <span class=\"token operator\">=</span> <span class=\"token function\">DateFormatter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        formatter<span class=\"token punctuation\">.</span>dateFormat <span class=\"token operator\">=</span> format\n        <span class=\"token keyword\">return</span> formatter<span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>MonthDateManager</h3>\n<div class=gatsby-remark-code-name>\n            <span>MonthDateManager.swift</span>\n          </div>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">Foundation</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">MonthDateManager</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> calendar <span class=\"token operator\">=</span> <span class=\"token builtin\">Calendar</span><span class=\"token punctuation\">.</span>current\n    <span class=\"token keyword\">private</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">set</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">var</span> days<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Date</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> firstDate<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token operator\">!</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">didSet</span> <span class=\"token punctuation\">{</span>\n           days <span class=\"token operator\">=</span> <span class=\"token function\">createDaysForMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">var</span> monthString<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> firstDate<span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token string\">\"YYYY/MM\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> component <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">dateComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span>year<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span>month<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">:</span> <span class=\"token function\">Date</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        component<span class=\"token punctuation\">.</span>day <span class=\"token operator\">=</span> <span class=\"token number\">1</span>\n        firstDate <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span>from<span class=\"token punctuation\">:</span> component<span class=\"token punctuation\">)</span>\n        days <span class=\"token operator\">=</span> <span class=\"token function\">createDaysForMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">createDaysForMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token builtin\">Date</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 月の初日の曜日</span>\n        <span class=\"token keyword\">let</span> dayOfTheWeek <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>weekday<span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">:</span> firstDate<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span>\n        <span class=\"token comment\">// 月の日数</span>\n        <span class=\"token keyword\">let</span> numberOfWeeks <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">range</span><span class=\"token punctuation\">(</span>of<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>weekOfMonth<span class=\"token punctuation\">,</span> <span class=\"token keyword\">in</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>month<span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> firstDate<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span>\n        <span class=\"token comment\">// その月に表示する日数</span>\n        <span class=\"token keyword\">let</span> numberOfItems <span class=\"token operator\">=</span> numberOfWeeks <span class=\"token operator\">*</span> <span class=\"token number\">7</span> \n\n        <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token operator\">&lt;</span>numberOfItems<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">map</span> <span class=\"token punctuation\">{</span> i <span class=\"token keyword\">in</span>\n            <span class=\"token keyword\">var</span> dateComponents <span class=\"token operator\">=</span> <span class=\"token function\">DateComponents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            dateComponents<span class=\"token punctuation\">.</span>day <span class=\"token operator\">=</span> i <span class=\"token operator\">-</span> dayOfTheWeek\n            <span class=\"token keyword\">return</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span>byAdding<span class=\"token punctuation\">:</span> dateComponents<span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">:</span> firstDate<span class=\"token punctuation\">)</span><span class=\"token operator\">!</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">nextMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        firstDate <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span>byAdding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>month<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">:</span> firstDate<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">prevMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        firstDate <span class=\"token operator\">=</span> calendar<span class=\"token punctuation\">.</span><span class=\"token function\">date</span><span class=\"token punctuation\">(</span>byAdding<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>month<span class=\"token punctuation\">,</span> value<span class=\"token punctuation\">:</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> to<span class=\"token punctuation\">:</span> firstDate<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>CalendarCell</h3>\n<p>セルはラベルだけです。\n土曜日は青くするといった要件はモデルの初期化に打ち込みます。</p>\n<div class=gatsby-remark-code-name>\n            <span>CalenderCell.swift</span>\n          </div>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">import</span> <span class=\"token builtin\">UIKit</span>\n\n<span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">CalendarCell</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionViewCell</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">var</span> label<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UILabel</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> it <span class=\"token operator\">=</span> <span class=\"token function\">UILabel</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        it<span class=\"token punctuation\">.</span>textAlignment <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>center\n        it<span class=\"token punctuation\">.</span>translatesAutoresizingMaskIntoConstraints <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span>\n        <span class=\"token keyword\">return</span> it\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGRect</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> frame<span class=\"token punctuation\">)</span>\n        contentView<span class=\"token punctuation\">.</span><span class=\"token function\">addSubview</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span>\n        \n        <span class=\"token builtin\">NSLayoutConstraint</span><span class=\"token punctuation\">.</span><span class=\"token function\">activate</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n            label<span class=\"token punctuation\">.</span>topAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> contentView<span class=\"token punctuation\">.</span>topAnchor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            label<span class=\"token punctuation\">.</span>bottomAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> contentView<span class=\"token punctuation\">.</span>bottomAnchor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            label<span class=\"token punctuation\">.</span>leftAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> contentView<span class=\"token punctuation\">.</span>leftAnchor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            label<span class=\"token punctuation\">.</span>rightAnchor<span class=\"token punctuation\">.</span><span class=\"token function\">constraint</span><span class=\"token punctuation\">(</span>equalTo<span class=\"token punctuation\">:</span> contentView<span class=\"token punctuation\">.</span>rightAnchor<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            <span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">required</span> <span class=\"token keyword\">init</span><span class=\"token operator\">?</span><span class=\"token punctuation\">(</span>coder aDecoder<span class=\"token punctuation\">:</span> <span class=\"token builtin\">NSCoder</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">fatalError</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"init(coder:) has not been implemented\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Model</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n         label<span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>text\n         label<span class=\"token punctuation\">.</span>textColor <span class=\"token operator\">=</span> model<span class=\"token punctuation\">.</span>textColor\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">CalendarCell</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">struct</span> <span class=\"token builtin\">Model</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">var</span> text<span class=\"token punctuation\">:</span> <span class=\"token builtin\">String</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token keyword\">var</span> textColor<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIColor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>black\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">CalendarCell</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">Model</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">init</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Date</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> weekday <span class=\"token operator\">=</span> <span class=\"token builtin\">Calendar</span><span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span><span class=\"token function\">component</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">.</span>weekday<span class=\"token punctuation\">,</span> from<span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> weekday <span class=\"token operator\">==</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">{</span>\n            textColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>lightRed\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> weekday <span class=\"token operator\">==</span> <span class=\"token number\">7</span> <span class=\"token punctuation\">{</span>\n            textColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>lightBlue\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            textColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>gray\n        <span class=\"token punctuation\">}</span>\n        text <span class=\"token operator\">=</span> date<span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token string\">\"d\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3>ViewController</h3>\n<div class=gatsby-remark-code-name>\n            <span>ViewController.swift</span>\n          </div>\n<div class=\"gatsby-highlight\" data-language=\"swift\"><pre class=\"language-swift\"><code class=\"language-swift\"><span class=\"token keyword\">final</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ViewController</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIViewController</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> dateManager <span class=\"token operator\">=</span> <span class=\"token function\">MonthDateManager</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> weeks <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"日\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"月\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"火\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"水\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"木\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"金\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"土\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">let</span> itemSize<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CGFloat</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token builtin\">UIScreen</span><span class=\"token punctuation\">.</span>main<span class=\"token punctuation\">.</span>bounds<span class=\"token punctuation\">.</span>width <span class=\"token operator\">-</span> <span class=\"token number\">60</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> <span class=\"token number\">7</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">lazy</span> <span class=\"token keyword\">var</span> calenderCollectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionView</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> layout <span class=\"token operator\">=</span> <span class=\"token function\">UICollectionViewFlowLayout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        layout<span class=\"token punctuation\">.</span>scrollDirection <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>vertical\n        layout<span class=\"token punctuation\">.</span>minimumLineSpacing <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n        layout<span class=\"token punctuation\">.</span>minimumInteritemSpacing <span class=\"token operator\">=</span> <span class=\"token number\">10</span>\n        layout<span class=\"token punctuation\">.</span>itemSize <span class=\"token operator\">=</span> <span class=\"token function\">CGSize</span><span class=\"token punctuation\">(</span>width<span class=\"token punctuation\">:</span> itemSize<span class=\"token punctuation\">,</span> height<span class=\"token punctuation\">:</span> <span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">let</span> collectionView <span class=\"token operator\">=</span> <span class=\"token function\">UICollectionView</span><span class=\"token punctuation\">(</span>frame<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">.</span>view<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">,</span> collectionViewLayout<span class=\"token punctuation\">:</span> layout<span class=\"token punctuation\">)</span>\n        collectionView<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>white\n        collectionView<span class=\"token punctuation\">.</span><span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">CalendarCell</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span> forCellWithReuseIdentifier<span class=\"token punctuation\">:</span> <span class=\"token string\">\"cell\"</span><span class=\"token punctuation\">)</span>\n        collectionView<span class=\"token punctuation\">.</span>delegate <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        collectionView<span class=\"token punctuation\">.</span>dataSource <span class=\"token operator\">=</span> <span class=\"token keyword\">self</span>\n        <span class=\"token keyword\">return</span> collectionView\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    \n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">setUpNavigationBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        navigationController<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>navigationBar<span class=\"token punctuation\">.</span>barTintColor <span class=\"token operator\">=</span> <span class=\"token function\">UIColor</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">:</span> <span class=\"token number\">255</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> green<span class=\"token punctuation\">:</span> <span class=\"token number\">132</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> blue<span class=\"token punctuation\">:</span> <span class=\"token number\">214</span><span class=\"token operator\">/</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> alpha<span class=\"token punctuation\">:</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n        navigationController<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>navigationBar<span class=\"token punctuation\">.</span>tintColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>white\n        navigationController<span class=\"token operator\">?</span><span class=\"token punctuation\">.</span>navigationBar<span class=\"token punctuation\">.</span>titleTextAttributes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">.</span>foregroundColor <span class=\"token punctuation\">:</span> <span class=\"token builtin\">UIColor</span><span class=\"token punctuation\">.</span>white<span class=\"token punctuation\">]</span>\n        \n        navigationItem<span class=\"token punctuation\">.</span>rightBarButtonItem <span class=\"token operator\">=</span> <span class=\"token function\">UIBarButtonItem</span><span class=\"token punctuation\">(</span>\n            title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>plain<span class=\"token punctuation\">,</span>\n            target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n            action<span class=\"token punctuation\">:</span> #<span class=\"token function\">selector</span><span class=\"token punctuation\">(</span>actionNext<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n        \n        navigationItem<span class=\"token punctuation\">.</span>leftBarButtonItem <span class=\"token operator\">=</span> <span class=\"token function\">UIBarButtonItem</span><span class=\"token punctuation\">(</span>\n            title<span class=\"token punctuation\">:</span> <span class=\"token string\">\"back\"</span><span class=\"token punctuation\">,</span>\n            style<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>plain<span class=\"token punctuation\">,</span>\n            target<span class=\"token punctuation\">:</span> <span class=\"token keyword\">self</span><span class=\"token punctuation\">,</span>\n            action<span class=\"token punctuation\">:</span> #<span class=\"token function\">selector</span><span class=\"token punctuation\">(</span>actionBack<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">)</span>\n        title <span class=\"token operator\">=</span> dateManager<span class=\"token punctuation\">.</span>monthString\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">override</span> <span class=\"token keyword\">func</span> <span class=\"token function\">viewDidLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">super</span><span class=\"token punctuation\">.</span><span class=\"token function\">viewDidLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        view<span class=\"token punctuation\">.</span>backgroundColor <span class=\"token operator\">=</span> <span class=\"token punctuation\">.</span>white\n        calenderCollectionView<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>width <span class=\"token operator\">=</span> view<span class=\"token punctuation\">.</span>bounds<span class=\"token punctuation\">.</span>width\n        calenderCollectionView<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">.</span>height <span class=\"token operator\">=</span> <span class=\"token number\">500</span>\n        view<span class=\"token punctuation\">.</span><span class=\"token function\">addSubview</span><span class=\"token punctuation\">(</span>calenderCollectionView<span class=\"token punctuation\">)</span>\n        <span class=\"token function\">setUpNavigationBar</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token atrule\">@objc</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">actionNext</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        dateManager<span class=\"token punctuation\">.</span><span class=\"token function\">nextMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        calenderCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">reloadData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        title <span class=\"token operator\">=</span> dateManager<span class=\"token punctuation\">.</span>monthString\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token atrule\">@objc</span> <span class=\"token keyword\">private</span> <span class=\"token keyword\">func</span> <span class=\"token function\">actionBack</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        dateManager<span class=\"token punctuation\">.</span><span class=\"token function\">prevMonth</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        calenderCollectionView<span class=\"token punctuation\">.</span><span class=\"token function\">reloadData</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        title <span class=\"token operator\">=</span> dateManager<span class=\"token punctuation\">.</span>monthString\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">ViewController</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionViewDataSource</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">numberOfSections</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">in</span> collectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionView</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> <span class=\"token number\">2</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">collectionView</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> collectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionView</span><span class=\"token punctuation\">,</span> numberOfItemsInSection section<span class=\"token punctuation\">:</span> <span class=\"token builtin\">Int</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">Int</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">return</span> section <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token operator\">?</span> weeks<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span> <span class=\"token punctuation\">:</span> dateManager<span class=\"token punctuation\">.</span>days<span class=\"token punctuation\">.</span><span class=\"token builtin\">count</span>\n    <span class=\"token punctuation\">}</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">collectionView</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> collectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionView</span><span class=\"token punctuation\">,</span> cellForItemAt indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token builtin\">UICollectionViewCell</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">let</span> cell <span class=\"token operator\">=</span> collectionView<span class=\"token punctuation\">.</span><span class=\"token function\">dequeueReusableCell</span><span class=\"token punctuation\">(</span>withReuseIdentifier<span class=\"token punctuation\">:</span> <span class=\"token string\">\"cell\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">for</span><span class=\"token punctuation\">:</span> indexPath<span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span><span class=\"token operator\">!</span> <span class=\"token builtin\">CalendarCell</span>\n        <span class=\"token keyword\">if</span> indexPath<span class=\"token punctuation\">.</span>section <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> day <span class=\"token operator\">=</span> weeks<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">]</span>\n            <span class=\"token keyword\">let</span> model <span class=\"token operator\">=</span> <span class=\"token builtin\">CalendarCell</span><span class=\"token punctuation\">.</span><span class=\"token function\">Model</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">:</span> day<span class=\"token punctuation\">,</span> textColor<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">.</span>black<span class=\"token punctuation\">)</span>\n            cell<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">:</span> model<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">let</span> date <span class=\"token operator\">=</span> dateManager<span class=\"token punctuation\">.</span>days<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">]</span>\n            cell<span class=\"token punctuation\">.</span><span class=\"token function\">configure</span><span class=\"token punctuation\">(</span>model<span class=\"token punctuation\">:</span> <span class=\"token builtin\">CalendarCell</span><span class=\"token punctuation\">.</span><span class=\"token function\">Model</span><span class=\"token punctuation\">(</span>date<span class=\"token punctuation\">:</span> date<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">return</span> cell\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">extension</span> <span class=\"token builtin\">ViewController</span><span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionViewDelegate</span> <span class=\"token punctuation\">{</span>\n    \n    <span class=\"token keyword\">func</span> <span class=\"token function\">collectionView</span><span class=\"token punctuation\">(</span><span class=\"token number\">_</span> collectionView<span class=\"token punctuation\">:</span> <span class=\"token builtin\">UICollectionView</span><span class=\"token punctuation\">,</span> didSelectItemAt indexPath<span class=\"token punctuation\">:</span> <span class=\"token builtin\">IndexPath</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span> indexPath<span class=\"token punctuation\">.</span>section <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">return</span>\n        <span class=\"token punctuation\">}</span>\n        title <span class=\"token operator\">=</span> dateManager<span class=\"token punctuation\">.</span>days<span class=\"token punctuation\">[</span>indexPath<span class=\"token punctuation\">.</span>row<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">string</span><span class=\"token punctuation\">(</span>format<span class=\"token punctuation\">:</span> <span class=\"token string\">\"YYYY/MM/dd\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/166241/eda15263-65fe-8e7e-8869-cb714f5253ba.gif\" alt=\"file.gif\"></p>\n<p>今回は参考元の記事を尊重したコードを公開しましたが\n実際には前月の日付は表示したくない、スクロールしたいとかいった要望があると思います。</p>\n<p>にしても今更カレンダーなんて作りたくなかった。\n素直にライブラリ使えばよかった。</p>","frontmatter":{"title":"Swiftでカレンダーを作る","tags":["Xcode","iOS","Swift"],"date":"2019年04月28日"}},"sameTagPosts":{"edges":[{"node":{"id":"8845f661-5548-599d-8a4e-6a5320066ede","frontmatter":{"title":"SwiftUIでTextViewを使う","tags":["iOS","Swift","SwiftUI"],"date":"2019年10月27日"}}},{"node":{"id":"c57e83f6-2e10-5f63-abfb-b78c3814e7c3","frontmatter":{"title":"SwiftUIとXcodeのPreviewでオートレイアウトをリアルタイムで確認しながら実装できて感動した","tags":["Xcode","iOS","AutoLayout","Swift","SwiftUI"],"date":"2019年10月16日"}}},{"node":{"id":"36c8d4f0-7394-5bff-b6b5-bae80a8113aa","frontmatter":{"title":"Swift5.1 dynamicMemberLookup^KeyPathを使ってSwiftにKotolinのapplyを実装する","tags":["Xcode","iOS","Kotlin","Swift"],"date":"2019年10月04日"}}},{"node":{"id":"6aa8f8fc-5836-52a8-bd46-ae56d1d4f4de","frontmatter":{"title":"SwiftでTooltipを描画する","tags":["iOS","UIKit","Swift"],"date":"2019年08月31日"}}},{"node":{"id":"fa82a31d-4690-5cb8-a507-42237d6afec2","frontmatter":{"title":"実機１台で別端末のレイアウトを確認する方法","tags":["Xcode","iOS","Swift"],"date":"2019年08月15日"}}}]}},"pageContext":{"id":"9dddcf53-9179-5f44-a114-dbb75552a817","tags":["Xcode","iOS","Swift"]}}}